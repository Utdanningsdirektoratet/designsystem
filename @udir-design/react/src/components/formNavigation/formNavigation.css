.uds-form-navigation {
  --uds-form-navigation-connector: var(--ds-size-4);

  @media (prefers-reduced-motion: no-preference) {
    interpolate-size: allow-keywords;
  }

  &::part(details-content) {
    padding-top: var(--uds-form-navigation-connector);
    block-size: 0;
    overflow-y: hidden;
    display: flex;
    flex-direction: column;
    gap: var(--uds-form-navigation-connector);
    transition:
      content-visibility 400ms allow-discrete,
      height 400ms;
  }

  &[open]::part(details-content) {
    height: auto;
  }

  & button {
    all: unset;
    width: fit-content;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: var(--ds-size-2);
    position: relative;

    > div {
      position: relative;
      border: 2px solid var(--ds-color-border-default);
      width: var(--ds-size-5);
      height: var(--ds-size-5);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--ds-border-radius-full);
      background: var(--ds-color-surface-default);
      z-index: 1;
    }
  }

  > u-summary {
    > button:first-of-type {
      margin-left: 0;

      > div {
        width: var(--ds-size-6);
        height: var(--ds-size-6);
        border-radius: var(--ds-border-radius-sm);

        > svg:last-of-type {
          display: none;
        }
      }
    }
  }

  &[open] > u-summary > button {
    > svg:first-of-type {
      display: none;
    }
    > svg:last-of-type {
      display: block;
    }
  }

  &:not([open]) > u-summary > button {
    > svg:first-of-type {
      display: block;
    }
    > svg:last-of-type {
      display: none;
    }
  }

  > u-summary::before {
    display: none;
  }

  &[data-state='invalid'] > u-summary > button:first-of-type > div {
    background-color: var(--ds-color-danger-surface-tinted);
    border-color: var(--ds-color-danger-border-default);
    svg:last-of-type {
      display: block;
    }
    svg:first-of-type {
      display: none;
    }
  }

  &[data-state='completed'] > u-summary > button:first-of-type > div {
    background-color: var(--ds-color-accent-surface-tinted);
    border-color: var(--ds-color-accent-border-default);
  }

  > button {
    margin-left: calc(var(--ds-size-1) / 2);

    > div {
      &::before {
        content: '';
        position: absolute;
        bottom: calc(100% + 3px);
        left: 50%;
        transform: translateX(-50%);
        width: 2px;
        height: var(--uds-form-navigation-connector);
        background-color: var(--ds-color-border-default);
      }
      > svg {
        display: none;
      }
    }

    &[data-state='active'] > div > svg:first-of-type {
      display: block;
    }
    &[data-state='completed'] > div > svg:nth-of-type(2) {
      display: block;
    }
    &[data-state='invalid'] > div {
      border-color: var(--ds-color-danger-border-default);

      > svg:last-of-type {
        display: block;
        color: var(--ds-color-danger-text-default);
      }
    }
  }

  /* & > button:first-of-type {
    > div::before {
      display: none;
    }
  } */
}
