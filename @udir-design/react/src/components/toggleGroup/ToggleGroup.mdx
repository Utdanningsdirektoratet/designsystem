import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as ToggleGroupStories from './ToggleGroup.stories';

<Meta of={ToggleGroupStories} />

# ToggleGroup

Med `ToggleGroup` kan brukerne velge alternativer som påvirker innholdet på en side. Komponenten består av en gruppe knapper som henger sammen, der kun én knapp er mulig å velge om gangen. `ToggleGroup` har variantene `primary` og `secondary`.

**Passer til å**

- filtrere innhold i lister og tabeller
- veksle mellom datavisning og innhold, for eksempel mellom tabell og graf
- styre hvilke felter i et skjema som skal vises

**Passer ikke til å**

- bruke som skjemaelement – bruk heller [`Radio`](/docs/components-radio--docs)
- navigere – bruk heller [`Tabs`](/docs/components-tabs--docs) hvis det dreier seg om panelnavigasjon

## Slik bruker du ToggleGroup

<Canvas of={ToggleGroupStories.Preview} withToolbar />
<Controls />

Plasser helst innholdet du skal styre rett etter `ToggleGroup` i DOM-en. Hvis ikke, bør du bruke `aria-controls` på `ToggleGroup` for å knytte komponenten til den containeren for innholdet som endrer seg.

```tsx
import { ToggleGroup } from '@udir-design/react';

<ToggleGroup defaultValue="value1">
  <ToggleGroup.Item value="value1">Option 1</ToggleGroup.Item>
  <ToggleGroup.Item value="value2">Option 2</ToggleGroup.Item>
  <ToggleGroup.Item value="value3">Option 3</ToggleGroup.Item>
</ToggleGroup>;
```

## Varianter av ToggleGroup

`ToggleGroup` har to varianter, `primary` og `secondary`. Hvilken man bruker avhenger av hvor framtredende valgene skal være.

### Primary ToggleGroup

Dette er den mest framtredende varianten.

<Canvas of={ToggleGroupStories.Primary} />

### Secondary ToggleGroup

Denne varianten kan brukes for å tone ned viktigheten av valgene i forhold til andre valg eller handlinger på siden.

<Canvas of={ToggleGroupStories.Secondary} />

## Eksempler

### Kontrollert tilstand

For at resten av systemet skal kunne vite hvilken knapp som er valgt må du bruke `value` og `onChange`. Dette kan også brukes til å styre hvilken som er valgt utenfra. Eksempelet under viser hvordan du kan filtrere innhold i en datatabell for retting av prøver. Her er det også en ekstra knapp som endrer tilstand i `ToggleGroup` til "Ikke påbegynt". Dette kan være nyttig når listen over besvarelser er lang, og du vil at brukerne skal kunne bytte til en mye brukt tilstand uten å scrolle opp igjen.

<Canvas of={ToggleGroupStories.Controlled} />

### Ulike typer innhold

`ToggleGroup` kan ha tre typer innhold:

- bare tekst
- tekst med ikon til venstre for teksten
- bare ikon

#### Bare tekst

<Canvas of={ToggleGroupStories.OnlyText} />

#### Tekst med ikon

Kombinasjonen av ikoner og tekst gir både visuell og tekstlig beskrivelse av innholdet. Ikonene skal markeres med `aria-hidden`.

<Canvas of={ToggleGroupStories.TextAndIcons} />

#### Bare ikon

Alternativet "Bare ikon" brukes kun når du vet at brukerne vil forstå ikonet. Det kan for eksempel være ekspertbrukere eller brukere av interne tjenester, som kjenner symbolene i den aktuelle `ToggleGroup` godt. Forklar handlingene med [`Tooltip`](/docs/components-tooltip--docs) når du bruker kun ikoner.

<Canvas of={ToggleGroupStories.OnlyIcons} />

## Retningslinjer

Det må være minst to, men ikke flere enn fem valg i en `ToggleGroup`. Trenger du flere valg enn fem, bruker du for eksempel [`Select`](/docs/components-select--docs) eller [`Suggestion`](/docs/components-suggestion--docs).

Pass på at hele komponenten får plass på skjermen og at alle valgene er godt synlig for brukerne. I grensesnitt med liten plass kan du også vurdere om det er bedre å bruke [`Select`](/docs/components-select--docs) eller [`Suggestion`](/docs/components-suggestion--docs).

## Tekst i ToggleGroup

Ha gjerne med en ledetekst for gruppen, som forklarer hva valgene gjelder. Skriv tydelige tekster for valgene i komponenten, og pass på at de har samme språklige form. Ta med hint i [`Tooltip`](/docs/components-tooltip--docs) om det er nødvendig med mer informasjon, særlig hvis du bare viser ikoner.

## Tilgjengelighet

`ToggleGroup` har standard fokusindikator med ramme.
Komponenten bruker [roving tabindex](https://developer.mozilla.org/en-US/docs/Web/Accessibility/Guides/Keyboard-navigable_JavaScript_widgets#managing_focus_inside_groups) for å håndtere fokusbevegelse mellom knappene. I praksis gjør dette at <kbd>Tab</kbd> flytter fokus til den aktive knappen, eller videre ut av `ToggleGroup`, mens piltastene flytter fokus mellom knappene i `ToggleGroup`.

### Tastaturinteraksjon

- <kbd>Tab</kbd> - flytter fokuset til den aktive toggle-knappen.
- <kbd>Shift+Tab</kbd> - flytter fokuset til elementet før `ToggleGroup` i
  tabindex.
- <kbd>Space</kbd> - velger en knapp.
- <kbd>Enter</kbd> - velger en knapp.
- <kbd data-icon>↑</kbd> eller <kbd data-icon>←</kbd> - flytter fokuset til
  forrige knapp i gruppa.
- <kbd data-icon>↓</kbd> eller <kbd data-icon>→</kbd> - flytter fokuset til
  neste knapp i gruppa.
- <kbd>Home</kbd> - går til første knapp i gruppa.
- <kbd>End</kbd> - går til siste knapp i gruppa.
