import { Meta, Controls, Primary, ArgTypes, Canvas } from '@storybook/blocks';

import * as ErrorSummaryStories from './ErrorSummary.stories';

<Meta of={ErrorSummaryStories} />

# ErrorSummary

`ErrorSummary` er en oppsummering av feil. Det gir brukeren oversikt over feil eller
mangler som må rettes på en side eller i et steg for å komme videre.

**Passer til å**

- gi brukerne en oversikt over hva som må rettes før de kan fortsette

**Passer ikke til å**

- vise feilmeldinger for individuelle felter, bruk heller `error` prop for [`Textfield`](/docs/components-textfield--docs), [`Checkbox`](/docs/components-checkbox--docs), [`Radio`](/docs/components-radio--docs) og [`Switch`](/docs/components-switch--docs); eller kombiner [`Field`](/docs/components-switch--docs) og [`ValidationMessage`](/docs/components-typography--docs#validationmessage) for andre skjemaelementer

## Slik bruker du ErrorSummary

<Primary />
<Controls />

```tsx
import { ErrorSummary } from '@udir-design/react';

<ErrorSummary>
  <ErrorSummary.Heading>Heading</ErrorSummary.Heading>
  <ErrorSummary.List>
    <ErrorSummary.Item>
      <ErrorSummary.Link href="#">Item</ErrorSummary.Link>
    </ErrorSummary.Item>
  </ErrorSummary.List>
</ErrorSummary>;
```

Ta en titt på [demosiden for et fullstendig skjema](/docs/demo-form-demo--docs/) for å se hvordan `ErrorSummary` brukes i praksis.

## Eksempler

### Bruk med tekstfelt

<Canvas of={ErrorSummaryStories.WithForm} />

### Skjult

`ErrorSummary` er vanligvis skjult helt til brukeren prøver å komme seg videre og det er feil eller mangler som hindrer det.

<Canvas of={ErrorSummaryStories.ShowHide} />

## Retningslinjer

`ErrorSummary` er en viktig del av brukeropplevelsen og skal brukes i alle skjemaer der det er mulig å ha flere feil eller mangler. Følg disse retningslinjene for å sikre at `ErrorSummary` brukes riktig:

- Bruk en overskrift: “For å gå videre må du rette opp følgende feil”.
- `ErrorSummary` skal inneholde alle feilmeldingene på siden.
- Feilmeldingene skal lenke direkte til feltet det gjelder og fokuset skal flyttes dit.
- Lenketeksten skal stemme overens med feilmeldingene de peker til.
- Hvis feilen gjelder flere felt, lenker vi til det første tilfellet av feilen.

### Plassering

Vi anbefaler å vise `ErrorSummary` like over Neste/Send inn-knappen. Dette for
at brukerne skal forstå sammenhengen mellom feilen og hvorfor de blir hindret i å gå videre.

I noen tilfeller kan det likevel være bedre å vise `ErrorSummary` i toppen, det kan du lese mer om i [artikkelen om feilmeldinger hos Digdir](https://designsystemet.no/monstre/feilmeldinger#oppsummering-av-flere-feilmeldinger).

### Synlighet

`ErrorSummary` skal ikke være synlig uten at brukeren foretar seg noe. Den skal bli synlig først når brukeren har utført en handling som utløser feil.

Hvis vi validerer fortløpende (f.eks. ved `onBlur` på hvert felt), venter vi med å vise ErrorSummary til brukeren prøver å sende inn skjemaet.

## Tilgjengelighet

`ErrorSummary` har `aria-role='alert'` som standard. Dette betyr at skjermlesere vil lese opp innholdet i `ErrorSummary` automatisk når den dukker opp. Det er viktig å sørge for at den får fokus ved submit slik at brukeren får med seg at det er feil eller mangler i skjemaet.

**Pass på at**

- fokus flyttes til `ErrorSummary` når den blir synlig
- fokus flyttes til stedet hvor feilen eller mangelen oppstod når brukeren trykker på en lenke i `ErrorSummary`
